notifications:
  email: false

dist: trusty
language: c
compiler: gcc

cache:
  directories:
    - '$HOME/.sonar/cache'

addons:
  sonarcloud:
    organization: "nathan-lg-github"

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y gcc-arm-linux-gnueabihf
  - arm-linux-gnueabihf-gcc --version

before_script:
  - ls
  - export CC=arm-linux-gnueabihf-gcc
  - mkdir build
  - cd build
  - cmake ..
  - make clean
  - build-wrapper-linux-x86-64 --out-dir bw_output make
  - cd ..
  - sonar-scanner -Dsonar.verbose=true -X

script: make